# ローカル版 GitHub もどきツール

## プロジェクト進め方・タスク一覧（保存版）

本ファイルは、このプロジェクト全体の **進め方 / タスク / プロセス** をまとめたものです。  
実装や設計で迷ったときは、いつでもこのファイルを見れば現在地が分かります。

---

# 0. 全体の開発方針

- **まずは動く最小機能（MVP）を作る**
- 複雑な機能（ブランチ/マージなど）は **バックログに逃がす**
- コードはまず自分で書いて、**AIに添削させる運用**
- ドキュメントは「生きたドキュメント」として随時更新
- 一度に全部やらず、**ユースケース単位で刻む**

---

# 1. まず最初に作るもの（フェーズ0：ドキュメント準備）

## 1-1. プロジェクトフォルダ作成

例：
local-github-like-tool/
├─ docs/
├─ src/
├─ sql/
└─ assets/

markdown
コードをコピーする

## 1-2. 要件定義書 v0.1（Markdown）を作成

ファイル名例：  
`docs/requirements-local-github-v0.1.md`

内容：

- 概要・目的
- 背景
- 機能要件（Init / Add / Commit / 履歴 / 差分 / ロールバック）
- 技術選定（C#, WinForms, SQL Server）
- 非機能要件
- 拡張候補

## 1-3. 要件定義書の末尾に以下を追加

変更履歴
2025-11-30 v0.1 作成

バックログ
ブランチ風機能

リッチ差分ビュー

設定バックアップ/リストア

将来 Git との連携を検討

yaml
コードをコピーする

## 1-4. ユースケース3本を書く

- リポジトリ初期化
- コミットまでの流れ
- 履歴閲覧＆ロールバック

---

# 2. フェーズ1：DB設計（たたき台でOK）

## 2-1. 必要テーブルを書き出す

- `Repositories`
- `Commits`
- `Files`
- `FileVersions`

## 2-2. 日本語で「役割」と「項目イメージ」を追記

あとで私と相談して精査する。

---

# 3. フェーズ2：UI とクラスのざっくり設計

## 3-1. ワイヤーフレームを書く（MarkdownでOK）

例：
┌───────────────┬───────────────┐
│ リポジトリ一覧 │ コミット履歴 │
│ （左側） │ （右上） │
├───────────────┼───────────────┤
│ 変更ファイル一覧 │ 差分ビュー │
│ （右下） │ │
└───────────────┴───────────────┘

yaml
コードをコピーする

## 3-2. クラス構成（たたき台）

- RepositoryService
- CommitService
- FileSnapshotService
- DiffService

Form は「Service を呼ぶだけ」に徹する。

---

# 4. フェーズ3：Visual Studio で環境構築

## 4-1. WinForms プロジェクト作成

`src/LocalGitHubTool.sln` など。

## 4-2. メインフォーム作成

- リポジトリ選択コンボ
- Init / Commit / Diff ボタン

## 4-3. SQL Server 接続テスト

- `App.config` に接続文字列
- `using(SqlConnection)` で接続確認

---

# 5. フェーズ4：実装スタート（ユースケース単位）

## 5-1. ユースケース1「初期化」を実装

1. Repositories テーブル作成（SQL）
2. RepositoryService で Insert / Select 実装
3. Form とサービスを紐付ける

## 5-2. ユースケース2「コミット」を実装

1. フォルダスキャンの実装
2. 変更ファイル一覧の表示
3. FileVersions にスナップショット保存
4. Commits に概要保存

## 5-3. ユースケース3「履歴→差分→ロールバック」

1. 履歴一覧表示
2. 任意コミットのファイル一覧表示
3. 差分表示（まずは左右テキストボックスに内容出すだけ）
4. ロールバック（ファイル上書き）

---

# 6. AI の使い方（プロジェクト運用ルール）

## 6-1. あなたの役割

- 設計を書く（要件・ユースケース・DB）
- コードの第一稿を書く
- エラーと詰まった点を相談する

## 6-2. ChatGPT の役割

- 設計のレビュー＆修正案
- バグの原因説明
- コードの改善点指摘
- 書いたコードのリファクタ提案

## 6-3. Codex / Cursor の使い方

- ボイラープレート（同じようなコード）
- リファクタリング
- 小さめの補完
- 大きめの仕様は ChatGPT とあなたで設計 → Cursor は補助のみ

---

# 7. 今日のタスク（最初の一歩）

1. プロジェクトフォルダを作成
2. `requirements-local-github-v0.1.md` を作成
3. 変更履歴 / バックログを追記
4. ユースケース3本を自分の言葉で書く  
   （書けたら私に貼ってください）

---

# 以上

このファイル自体が「進め方の教科書」になります。  
迷ったら常にここに戻る想定です。
📌 これをそのまま Markdown として保存すればOK
あなたが悩んでいた「何から手をつけたらいいか」「どう進めればいいか」は、このファイルを軸にすれば迷わなくなります。

もし必要なら v0.2 以降用にテンプレ化した要件定義テンプレ も作れます。
次にやりたいのは「要件定義 v0.1 を実際に Markdown で作る」ですね。

必要なら「要件定義 v0.1 の完全版 Markdown」も今すぐ作りますか？

あなた:
よろしくお願いします。 要件定義バージョン1の完全版マーク版もお願いします。 それをコピペして保存します。

ChatGPT:
了解しました。
では そのままコピペして保存できる “要件定義 v0.1（Markdown 完全版）” を作成します。
プロジェクトのスタート地点となる正式な要件定義です。

✅ コピペ用：要件定義書 v0.1（Markdown 完全版）
以下を requirements-local-github-v0.1.md として保存してください。

md
コードをコピーする

# ローカル版 GitHub もどきツール

## 要件定義書 v0.1（2025-11-30）

---

# 1. 概要（Overview）

本プロジェクトは、ローカル環境（自PC）と SQL Server を使用し、  
GitHub と同様の **バージョン管理（変更履歴・差分表示・ロールバック）** を  
最小限の機能で実現する「ローカル版 GitHub もどきツール」を構築するものである。

Git や GitHub を理解するための教材としての役割と、  
社内環境で GitHub を使用できない状況での **設定ファイルの安全な変更管理** を目的とする。

---

# 2. 背景（Background）

- 現在の社内環境では Git / GitHub が使用できない
- 設定ファイルを「コピー・上書き」で運用しており、
  - どこを変更したか分からない
  - 元に戻すのが難しい
  - バージョンの整合性が取れない
- この課題を解決するため、
  - ローカルPC内で完結する
  - Git の概念に近い
  - 変更履歴が残せる  
    **簡易バージョン管理ツール** を作成する。

開発者自身が Git の概念を理解しながら実装することで、  
GitHub の基礎理解・実装力の向上も狙う。

---

# 3. 開発目的（Purpose）

- **どこを変更したか視覚的に分かるようにする**
- **過去バージョンに戻せるようにする**
- **SQL Server で変更履歴を管理できるようにする**
- **Git の “init / add / commit / diff / rollback” を模した動きを理解する**
- **社内でも安全に利用できるローカルツールを作る**

---

# 4. スコープ（Scope：v0.1 → MVP）

最初のバージョン（v0.1）では次の機能を提供する。

---

## 4.1 リポジトリ初期化（Git Init 相当）

### 機能概要

- 任意のフォルダを「リポジトリ」として登録
- SQL Server に以下を保存：
  - RepositoryId（PK）
  - LocalPath
  - 作成日時 など

### UI

- 「フォルダ選択」ボタン
- 「初期化（Init）」ボタン
- 登録済みリポジトリの一覧（コンボボックス or リスト）

---

## 4.2 ファイル追加・変更検知（Git Add 相当）

### 機能概要

- 初期化済みフォルダ内ファイル一覧取得
- 前回コミットとの差分を検知して一覧表示
  - 新規
  - 更新
  - 削除
- コミット対象ファイルをチェックボックスで選択可能

---

## 4.3 コミット（Git Commit 相当）

### 機能概要

- コミットメッセージ入力
- 選択されたファイルを **スナップショットとして SQL Server に保存**
- 保存される情報：
  - CommitId
  - RepositoryId
  - Message
  - 実際のファイル内容（nvarchar(max) または varbinary）
  - 対象ファイルリスト
  - 日時

### 備考

- v0.1 では差分アルゴリズムは使わず「丸ごと保存」でOK  
  （後続フェーズで差分管理に切替可能）

---

## 4.4 コミット履歴の閲覧（History）

### 機能概要

- 指定リポジトリのコミット一覧を表示
- 任意コミットを選択すると：
  - コミット時点のファイル一覧を表示
  - ファイル内容を取得可能（差分表示で使用）

---

## 4.5 差分表示（Diff：最低限の実装）

### 機能概要

- コミット A とコミット B で比較して、  
  **ファイル内容のテキストを左右のテキストボックスに表示**
- v0.1 では見た目の差分ハイライトは行わない  
  （後述のバックログで強化）

---

## 4.6 ロールバック（任意コミットに戻す）

### 機能概要

- 任意コミットを選択し「ロールバック」ボタン押下で、
  - 現在のローカルファイルを過去バージョンで上書き
- 安全のため：
  - ロールバック前に現在の状態を「自動バックアップ」することを推奨

---

# 5. 非機能要件（Non-Functional Requirements）

## 5.1 開発環境

- OS: Windows 10 / 11
- IDE: Visual Studio
- 言語: C#
- UI: WinForms
- DB: SQL Server（ローカル / 社内サーバー）

## 5.2 パフォーマンス

- 対象は「数百ファイル」レベルの小規模管理を想定
- 巨大リポジトリの最適化は対象外（後続の拡張で検討）

## 5.3 ユーザビリティ

- Git 初心者でも扱える直感的な UI
- 画面の構成はわかりやすく四分割レイアウトを意識

---

# 6. 技術選定（Technology Stack）

- **C#（.NET Framework / WinForms）**
  - GUI の構築が容易で学習コストが低い
- **SQL Server**
  - 履歴・差分管理の保存先として使用
- **AI 補助**
  - Cursor / Copilot：リファクタ・補助的な生成に使用
  - ChatGPT：設計レビュー・問題解決・コードの添削

---

# 7. 画面構成（Wireframe：ラフ案）

┌──────────────────┬──────────────────────────────┐
│ リポジトリ一覧（左） │ コミット履歴（右上） │
│ ・追加 / 初期化 │ ・コミットID / メッセージ / 日付 │
├──────────────────┼──────────────────────────────┤
│ 変更ファイル一覧（右下） │ 差分ビュー（右下） │
│ ・チェックボックスで選択 │ ・左：旧バージョン / 右：新バージョン │
└──────────────────┴──────────────────────────────┘

yaml
コードをコピーする

---

# 8. データベース設計（たたき台）

## 8.1 Repositories

| Column       | Type          | Note                 |
| ------------ | ------------- | -------------------- |
| RepositoryId | int (PK)      | 自動採番             |
| Name         | nvarchar(200) | 任意                 |
| LocalPath    | nvarchar(500) | 実フォルダとの紐付け |
| CreatedAt    | datetime2     | 作成日時             |

## 8.2 Commits

| Column       | Type          | Note     |
| ------------ | ------------- | -------- |
| CommitId     | int (PK)      | 自動採番 |
| RepositoryId | int (FK)      |          |
| Message      | nvarchar(500) |          |
| CreatedAt    | datetime2     |          |

## 8.3 Files

| Column       | Type          | Note |
| ------------ | ------------- | ---- |
| FileId       | int (PK)      |      |
| RepositoryId | int (FK)      |      |
| RelativePath | nvarchar(500) |      |

## 8.4 FileVersions

| Column        | Type          | Note         |
| ------------- | ------------- | ------------ |
| FileVersionId | int (PK)      |              |
| FileId        | int (FK)      |              |
| CommitId      | int (FK)      |              |
| Content       | nvarchar(max) | ファイル内容 |
| CreatedAt     | datetime2     |              |

---

# 9. ユースケース（Use Cases）

## UC-01：リポジトリ初期化

1. ユーザーがフォルダを選択
2. 「初期化」ボタン押下
3. SQL Server に新しいリポジトリが登録
4. UI のリポジトリ一覧に反映

---

## UC-02：ファイルの変更 → コミット

1. リポジトリを選択
2. 「変更ファイル一覧のスキャン」ボタン押下
3. 変更候補ファイルが一覧表示
4. コミット対象にチェック
5. メッセージ入力 → 「コミット」
6. SQL Server に内容保存、履歴更新

---

## UC-03：履歴表示 → 差分 → ロールバック

1. リポジトリ選択
2. コミット履歴を選択
3. ファイル一覧／差分を表示
4. 必要ならロールバック実行
5. ローカルフォルダが指定のコミット内容で更新

---

# 10. 今後の拡張候補（Backlog）

- ブランチ風機能（履歴の分岐・切替）
- 差分ビューの強化（行ごとの色付け／追加・削除表示）
- コミットのタグ付け
- 設定ファイルのバックアップ・リストア
- Git / GitHub API との連携（将来的に）

---

# 11. 変更履歴（Change Log）

- **2025-11-30 v0.1 作成**

---

以上。
